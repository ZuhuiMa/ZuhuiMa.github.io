<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zuhuima.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="题目Given a list of daily temperatures T, return a list such that, for each day in the input, tells you how many days you would have to wait until a warmer temperature. If there is no future day for whi">
<meta property="og:type" content="article">
<meta property="og:title" content="Leetcode 739. 每日温度">
<meta property="og:url" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/index.html">
<meta property="og:site_name" content="马祖晖的个人笔记">
<meta property="og:description" content="题目Given a list of daily temperatures T, return a list such that, for each day in the input, tells you how many days you would have to wait until a warmer temperature. If there is no future day for whi">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_old_1.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_old_2.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_old_3.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_old_4.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_old_5.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_old_6.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_old_1.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_new_1_1.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_new_2_1.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_new_3_1.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_new_3_2.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_new_4_1.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_new_5_1.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_new_5_2.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_new_5_3.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_new_5_4.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_new_5_5.png">
<meta property="og:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/compare.png">
<meta property="article:published_time" content="2020-06-11T16:42:19.000Z">
<meta property="article:modified_time" content="2021-12-05T14:04:28.408Z">
<meta property="article:author" content="马祖晖">
<meta property="article:tag" content="Leetcode">
<meta property="article:tag" content="数据结构">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/d_old_1.png">

<link rel="canonical" href="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Leetcode 739. 每日温度 | 马祖晖的个人笔记</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">马祖晖的个人笔记</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">做人最重要的就是开心啦</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuhuima.github.io/2020/06/12/Leetcode-739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="马祖晖">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马祖晖的个人笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Leetcode 739. 每日温度
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-12 00:42:19" itemprop="dateCreated datePublished" datetime="2020-06-12T00:42:19+08:00">2020-06-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-05 22:04:28" itemprop="dateModified" datetime="2021-12-05T22:04:28+08:00">2021-12-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>Given a list of daily temperatures T, return a list such that, for each day in the input, tells you how many days you would have to wait until a warmer temperature. If there is no future day for which this is possible, put 0 instead.</p>
<p>For example, given the list of temperatures T = [73, 74, 75, 71, 69, 72, 76, 73], your output should be [1, 1, 4, 2, 1, 1, 0, 0].</p>
<p>Note: The length of temperatures will be in the range [1, 30000]. Each temperature will be an integer in the range [30, 100].</p>
<a id="more"></a>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>题目不算复杂，简单来说就是对每个元素都执行往后查找更大元素的操作，若有则返回步距，无则返回0，最后把返回结果的集合输出。</p>
<h3 id="暴力法"><a href="#暴力法" class="headerlink" title="暴力法"></a>暴力法</h3><h4 id="Step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h4><img src="d_old_1.png" width="70%" height="auto" title="输入数组" alt="输入数组."/>
题目给定的输入数组如上图所示，T = [73, 74, 75, 71, 69, 72, 76, 73]<br>
初始化结果容器,result = []

<h4 id="Step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h4><img src="d_old_2.png" width="70%" height="auto" title="输入数组" alt="输入数组."/>
在计算第一个元素相对应返回值时，实质上是红框内元素做比较。 第二个元素的值74大于第一个元素的值73，跳出循环，往result中加入两者index之差，也就是1.<br>
result = [1]

<h4 id="Step-3"><a href="#Step-3" class="headerlink" title="Step 3"></a>Step 3</h4><img src="d_old_3.png" width="70%" height="auto" title="输入数组" alt="输入数组."/>
同理，由于第三个元素的值75大于第二个元素的值74，满足跳出循环条件，往result添加1.
result = [1,1]

<h4 id="Step-4"><a href="#Step-4" class="headerlink" title="Step 4"></a>Step 4</h4><img src="d_old_4.png" width="70%" height="auto" title="输入数组" alt="输入数组."/>
这次循环中的过程稍显特殊，由于list[3] < 75, 不满足跳出循环条件，继续往右遍历，直到抵达list[6]时找到76，才跳出循环。往result中追加的值为，6 - 2 = 4.<br>
result = [1,1,4]

<h4 id="Last-Step"><a href="#Last-Step" class="headerlink" title="Last Step"></a>Last Step</h4><img src="d_old_5.png" width="70%" height="auto" title="输入数组" alt="输入数组."/>
由于最后一个元素永远返回0，所以最后一个需要判定的元素是倒数第二个。在这次循环中，list[6] < list[-1], 所以result追加0并跳出循环，然后再追加一个0(对应最后一个元素).<br>
result = [1,1,4,...,0,0]<br>
这段代码结束。

<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dailyTemperatures</span><span class="params">(T)</span>:</span></span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(T)<span class="number">-1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(T[i+<span class="number">1</span>:])):</span><br><span class="line">            <span class="keyword">if</span> T[i] &lt; T[i+j+<span class="number">1</span>]:</span><br><span class="line">                result.append(j+<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">elif</span> i+j == len(T)<span class="number">-2</span>:</span><br><span class="line">                result.append(<span class="number">0</span>)</span><br><span class="line">    result.append(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<p>以上就是最简单粗暴的穷举法的代码。</p>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p>优点：足够简单粗暴，能初步实现功能。<br><br>缺点： 时间复杂度是n^2，重复的切片操作会占用大量内存，存在大量重复操作。<br><img src="d_old_6.png" width="70%" height="auto" title="输入数组" alt="输入数组."/><br>在这一步的计算过程中，list[3]和list[4]对应的结果其实被重复计算了。 随着输入数组长度的增加，这种重复计算所消耗的时间会呈指数增长，因此这种简单穷举法是过不了leetcode的检测的。</p>
<h3 id="单调栈法"><a href="#单调栈法" class="headerlink" title="单调栈法"></a>单调栈法</h3><p>穷举法不行，那只能上数据结构了，这里我们需要引入一个名为单调栈的数据结构。通过维护这个单调栈，我们可以高效快速地求出答案。</p>
<h4 id="什么是单调栈"><a href="#什么是单调栈" class="headerlink" title="什么是单调栈"></a>什么是单调栈</h4><p>讲真我之前也没接触过这个概念，对着leetcode官方答案现学的，理解难免有所偏颇，望海涵。<br>顾名思义，单调栈就是一个栈内元素单调递增或单调递减的栈。<br>初始化一个单调栈很简单（为了贴合题目，这里会把单调栈设定为单调递减）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = [<span class="number">34</span>,<span class="number">38</span>,<span class="number">42</span>,<span class="number">45</span>,<span class="number">61</span>,<span class="number">65</span>]</span><br></pre></td></tr></table></figure>
<p>然后就是往该单调栈中进行入栈操作：</p>
<li>单调栈的入栈规则如下，如果栈为空，则直接入栈；
<li>如果入栈元素小于栈顶元素，则直接入栈；
<li>如果入栈元素大于栈顶元素，则弹出栈顶元素，直到入栈元素大于栈顶元素才能入栈。


<h4 id="Step-1-1"><a href="#Step-1-1" class="headerlink" title="Step 1"></a>Step 1</h4><p>同理，题目给定的输入数组如上图所示，T = [73, 74, 75, 71, 69, 72, 76, 73]<br><br><img src="d_old_1.png" width="70%" height="auto" title="输入数组" alt="输入数组."/><br>初始化结果容器,result = [0]*len(T)<br><br><img src="d_new_1_1.png" width="70%" height="auto" title="输入数组" alt="输入数组."/></p>
<h4 id="Step-2-1"><a href="#Step-2-1" class="headerlink" title="Step 2"></a>Step 2</h4><p>空栈，直接入栈。需要注意的是这里入栈的实际上并非是元素的值，而是其索引。<br><img src="d_new_2_1.png" width="70%" height="auto" title="输入数组" alt="输入数组."/></p>
<h4 id="Step-3-1"><a href="#Step-3-1" class="headerlink" title="Step 3"></a>Step 3</h4><p>由于此时栈中已有元素，入栈前，首先对比新元素和栈顶元素在list中对应元素的值的大小。<br>听起来或许很绕，但在这个循环中其实就是对比list[0]和list[1]的值的大小。<br>list[0] = 73, list[1] = 74.<br><img src="d_new_3_1.png" width="70%" height="auto" title="输入数组" alt="输入数组."/><br>由于T[1] &gt; T[0],不满足入栈条件，先弹出栈顶元素0,再入栈新元素1,两者相减则为result[0]的值。<br>所以在此时,result = [1,0,0,0,0,0,0,0], stack = [1].<br><img src="d_new_3_2.png" width="70%" height="auto" title="输入数组" alt="输入数组."/></p>
<h4 id="Step-4-1"><a href="#Step-4-1" class="headerlink" title="Step 4"></a>Step 4</h4><p>同理,由于T[2] &gt; T[1],不满足入栈条件，先弹出栈顶元素1,再入栈新元素2,两者相减则为result[1]的值。<br>所以在此时,result = [1,1,0,0,0,0,0,0] stack = [2].<br><img src="d_new_4_1.png" width="70%" height="auto" title="输入数组" alt="输入数组."/></p>
<h4 id="Step-5"><a href="#Step-5" class="headerlink" title="Step 5"></a>Step 5</h4><p>在这个循环中， 首先遍历到list的第四个元素，即i = 3.<br>由于list[3] &lt; list[2] ( 71 &lt; 75), 3直接入栈。<br>同理，4也直接入栈成功。 此时各变量如图所示：<br><img src="d_new_5_1.png" width="70%" height="auto" title="输入数组" alt="输入数组."/><br>当 i = 5时，因为list[5] &gt; list[4], 弹出栈顶元素4并根据5 - 4 = 1可得 result[4] = 1.<br><img src="d_new_5_2.png" width="70%" height="auto" title="输入数组" alt="输入数组."/><br>然后i = 5继续尝试入栈，由于list[5] &gt; list[3] (72 &gt; 71),result[3] = 5 - 3 = 2.<br><img src="d_new_5_3.png" width="70%" height="auto" title="输入数组" alt="输入数组."/><br>这时终于满足入栈条件，5入栈成功。<br><img src="d_new_5_4.png" width="70%" height="auto" title="输入数组" alt="输入数组."/><br>通过以上一系列计算，在维护stack的单调性的同时，result[3] 和 result[4]的值依次被算出。<br>依照这个流程result[2]会在下一次循环中被算出，而最后残留在栈中的索引的对应值则会保留默认值0.<br><img src="d_new_5_5.png" width="70%" height="auto" title="输入数组" alt="输入数组."/></p>
<h4 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dailyTemperatures_optimzed</span><span class="params">(T)</span>:</span></span><br><span class="line">    result = [<span class="number">0</span>] * len(T)</span><br><span class="line">    stack = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(T)):</span><br><span class="line">        temp = T[i]</span><br><span class="line">        <span class="keyword">while</span> stack <span class="keyword">and</span> T[stack[<span class="number">-1</span>]] &lt; temp:</span><br><span class="line">            pre_index = stack.pop()</span><br><span class="line">            result[pre_index] = i - pre_index</span><br><span class="line">        stack.append(i)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<h4 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h4><p>在维护单调栈的过程中，栈内每个元素的值都会被计算有且仅有一次，极大地减少了多余的计算步骤，并且由于只需要储存有限几个索引在栈中，内存空间的占用也较为有限。<br>虽然引入一个新的数据结构看似会引入更高的复杂度，但是对比起穷举法需要的双指针，单调栈法只需专注于栈顶元素，实现得更为优雅简洁。</p>
<h2 id="耗时对比"><a href="#耗时对比" class="headerlink" title="耗时对比"></a>耗时对比</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dailyTemperatures</span><span class="params">(T)</span>:</span></span><br><span class="line">    <span class="keyword">import</span> datetime</span><br><span class="line">    start = datetime.datetime.now()</span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(T)<span class="number">-1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(T[i+<span class="number">1</span>:])):</span><br><span class="line">            <span class="keyword">if</span> T[i] &lt; T[i+j+<span class="number">1</span>]:</span><br><span class="line">                result.append(j+<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">elif</span> i+j == len(T)<span class="number">-2</span>:</span><br><span class="line">                result.append(<span class="number">0</span>)</span><br><span class="line">    result.append(<span class="number">0</span>)</span><br><span class="line">    end = datetime.datetime.now()</span><br><span class="line">    print(end-start)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dailyTemperatures_optimzed</span><span class="params">(T)</span>:</span></span><br><span class="line">    <span class="keyword">import</span> datetime</span><br><span class="line">    start = datetime.datetime.now()</span><br><span class="line">    result = [<span class="number">0</span>] * len(T)</span><br><span class="line">    stack = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(T)):</span><br><span class="line">        temp = T[i]</span><br><span class="line">        <span class="keyword">while</span> stack <span class="keyword">and</span> T[stack[<span class="number">-1</span>]] &lt; temp:</span><br><span class="line">            pre_index = stack.pop()</span><br><span class="line">            result[pre_index] = i - pre_index</span><br><span class="line">        stack.append(i)</span><br><span class="line">    end = datetime.datetime.now()</span><br><span class="line">    print(end-start)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_range = [<span class="number">10</span> ** i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">6</span>)]</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> my_range:</span><br><span class="line">    list = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(j):</span><br><span class="line">        list.append(random.randint(<span class="number">30</span>, <span class="number">100</span>))</span><br><span class="line">    print(len(list))</span><br><span class="line">    (dailyTemperatures(list))</span><br><span class="line">    (dailyTemperatures_optimzed(list))</span><br></pre></td></tr></table></figure>

<img src="compare.png" width="auto" height="400px" title="输入数组" alt="输入数组."/>
从以上代码中可得，随着输入数组的长度的增长，穷举法消耗的时间呈指数增长，而单调栈法的耗时呈线形增长。
当输入数组长度接近10万时，单调栈法的优势极为明显。




    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Leetcode/" rel="tag"># Leetcode</a>
              <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag"># 数据结构</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/06/11/hello-world/" rel="prev" title="hexo简单指令">
      <i class="fa fa-chevron-left"></i> hexo简单指令
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/01/01/Leetcode-605-%E7%A7%8D%E8%8A%B1%E9%97%AE%E9%A2%98/" rel="next" title="Leetcode 605. 种花问题">
      Leetcode 605. 种花问题 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#题目"><span class="nav-number">1.</span> <span class="nav-text">题目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解法"><span class="nav-number">2.</span> <span class="nav-text">解法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#暴力法"><span class="nav-number">2.1.</span> <span class="nav-text">暴力法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-1"><span class="nav-number">2.1.1.</span> <span class="nav-text">Step 1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-2"><span class="nav-number">2.1.2.</span> <span class="nav-text">Step 2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-3"><span class="nav-number">2.1.3.</span> <span class="nav-text">Step 3</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-4"><span class="nav-number">2.1.4.</span> <span class="nav-text">Step 4</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Last-Step"><span class="nav-number">2.1.5.</span> <span class="nav-text">Last Step</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码"><span class="nav-number">2.1.6.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分析"><span class="nav-number">2.1.7.</span> <span class="nav-text">分析</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#单调栈法"><span class="nav-number">2.2.</span> <span class="nav-text">单调栈法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是单调栈"><span class="nav-number">2.2.1.</span> <span class="nav-text">什么是单调栈</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-1-1"><span class="nav-number">2.2.2.</span> <span class="nav-text">Step 1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-2-1"><span class="nav-number">2.2.3.</span> <span class="nav-text">Step 2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-3-1"><span class="nav-number">2.2.4.</span> <span class="nav-text">Step 3</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-4-1"><span class="nav-number">2.2.5.</span> <span class="nav-text">Step 4</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-5"><span class="nav-number">2.2.6.</span> <span class="nav-text">Step 5</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-1"><span class="nav-number">2.2.7.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分析-1"><span class="nav-number">2.2.8.</span> <span class="nav-text">分析</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#耗时对比"><span class="nav-number">3.</span> <span class="nav-text">耗时对比</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">马祖晖</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">感谢蔡思敏同志大力支持</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
